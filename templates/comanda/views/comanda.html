{% extends 'base.html' %}
{% block conteudo %}

<body class="w-100 bg-dark">
  <header class="bg-dark text-white fw-bolder fs-3" style="margin-top: 15px; text-indent: 2.5%;">Ultimos Pedidos</header>

  <div id="divTable" class="bg-light table-responsive">
    {% set mesa_anterior = None %}  
    {% set cont = 0 %} 

    {% for pedido in pedidos %}
      {% if pedido.mesa != mesa_anterior %}
        {% if cont > 0 %}
          <div class="bg-dark"><br></div>
        {% endif %}

        <div class="mesaComanda">
          <div>
              {% if pedido.mesa < 10 %}
                  MESA:<span style="color: lime"> 0{{ pedido.mesa }}</span> 
              {% else %}
                  MESA:<span style="color: lime"> {{ pedido.mesa }}</span>
              {% endif %}
          </div>
      
          <div>
              {% if pedido.status == 1 %}
                  STATUS: <span style="color: chartreuse;">ABERTA </span>
              {% else %}
                  STATUS: <span style="color: red;">FECHADA</span> 
              {% endif %}
          </div>
      
          <div>
              TOTAL: <span style="color: dodgerblue;">${{ pedido.total | number_format(2, ',', '.') }}</span>
          </div>
      
          <div>
              √Ås: <span style="color: lightseagreen;">{{ pedido.data_hora | date('H:i') }}</span>
          </div>
      </div>
      
      {% set mesa_anterior = pedido.mesa %}
      {% set cont = 0 %}
      {% endif %}

      <table style="margin: auto; margin-bottom: 2px;">
        <thead>
          <tr>
            <th scope="col" style="width: 30px;">
              {% if cont == 0 %}
                ID
              {% set cont = 1 %}
              {% endif %}
            </th>
            <th class="thTable" scope="col">
              {% if cont == 1 %}
                LANCHES
              {% set cont = 2 %}
              {% endif %}
            </th>
            <th scope="col" style="width: 30px; padding-left: 5px">
              {% if cont == 2 %}
                ID
              {% set cont = 3 %}
              {% endif %}
            </th>
            <th class="thTable" scope="col">
              {% if cont == 3 %}
                ADICIONAIS
              {% set cont = 4 %}
              {% endif %}
            </th>
            <th class="thTable" scope="col" style="padding-left: 15px;">
              {% if cont == 4 %}
                BEBIDAS
              {% set cont = 5 %}
              {% endif %}
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td class="text-primary" style="font-weight: bolder;">
              {% if pedido.id_lanche < 10 and pedido.id_lanche != 0 %}
                0{{ pedido.id_lanche }}
              {% elseif pedido.id_lanche != "" %}
                {{ pedido.id_lanche }}
              {% else %}
                <span style="font-weight: bolder; color: black;">-</span>
              {% endif %}
            </td>
            <td style="font-weight: bolder;">
              {% if pedido.nome_lanche != "" %}
                {{ pedido.nome_lanche }}
              {% else %}
                <span style="font-weight: bolder;">-</span> 
              {% endif %}
            </td>
            <td class="text-primary" style="font-weight: bolder; padding-left: 5px;">
              {% if pedido.id_ingredi < 10 and pedido.id_ingredi != 0 %}
                0{{ pedido.id_ingredi }}
              {% elseif pedido.id_ingredi != "" %}
                {{ pedido.id_ingredi }}
              {% else %}
                <span style="font-weight: bolder; color: black;">-</span>
              {% endif %}
            </td>
            <td>
              {% if pedido.add_ingredi starts with '+' %}
                <span style="color: green; font-weight: bolder;">{{ pedido.add_ingredi }}</span>
              {% elseif pedido.add_ingredi starts with '-' %}
                <span style="color: red; font-weight: bolder;">{{ pedido.add_ingredi }}</span>
              {% else %}
                <span style="font-weight: bolder;">-</span>
              {% endif %}
            </td>
            <td style="font-weight: bolder; padding-left: 15px;">
              {% if pedido.nome_bebida != "" %}
                {{ pedido.nome_bebida }} {{ pedido.tamanho_bebida }}
              {% else %}
                <span style="font-weight: bolder;">-</span> 
              {% endif %}
            </td>
          </tr>
        </tbody>
      </table>
    {% endfor %}
  </div>
  
</body>

<script src="{{ url('/templates/comanda/assets/js/comanda.js') }}" defer></script>

{% endblock %}