{% extends 'base.html' %}

{% block conteudo %}

{% for item in cardapio %}
    <input type="hidden" value="{{ item.id_ingredi }}" id="idLancheTeste" class="idLancheTeste">
{% endfor %}

{% for item in bebidas %}
    <input type="hidden" value="{{ item.bebida_id }}" id="idBebidaNova" class="idBebidaNova">

    <input type="hidden" value="{{ item.marca }}" id="bebidaIgual" class="bebidaIgua">
{% endfor %}

<div class="bg-dark tabelaAdmin">
    <div style="width: 100%; margin: auto;">
        <form action="{{ url('novoItem') }}" method="post" class="row g-3 needs-validation" novalidate id="form">

            <header class="text-center" id="adicionarHeader" style="background-color: black; margin-top: 10px; padding: 0px;">
                <h4 class="text-white text-center">
                    <div class="linha-com-texto">
                        <span>CADASTRAR LANCHE</span>
                    </div>
                </h4>
            </header>

          <div class="col-12">
            <label for="nomeLanche" class="form-label" style="color: white; font-weight: bold;">NOME DO LANCHE</label>

            <input type="text" class="form-control" style="background-color: gainsboro; border-radius: 0px;" id="lanche" name="lanche" placeholder="Ex: X-Bacon" required>
          </div>

          <div class="col-12">
            <label for="ingredientes" class="form-label"  style="color: white; font-weight: bold;">INGREDIENTES DO LANCHE</label>

            <textarea class="form-control" style="background-color: gainsboro; border-radius: 0px;" id="ingredientes" name="ingredientes" rows="1" placeholder="Ex: P√£o, Hamburguer, Tomate, Alface..." required></textarea>
          </div>

          <div class="col-md-6">
            <label for="valorLanche" class="form-label" style="color: white; font-weight: bold;">VALOR DO LANCHE (R$)</label>

            <input type="number" class="form-control" style="background-color: gainsboro; border-radius: 0px;" id="valor" name="valor" step="0.01" min="0" placeholder="Valor do Lanche" required>
          </div>

            <header class="text-center" id="adicionarHeader" style="background-color: black; margin-top: 30px; padding: 0px;">
                <h4 class="text-white text-center">
                    <div class="linha-com-texto">
                        <span>CADASTRAR ADICIONAL</span>
                    </div>
                </h4>
            </header>

            <div class="col-12">
                <label for="nomeAdicional" class="form-label" style="color: white; font-weight: bold;">NOME DO ADICIONAL</label>

                <input type="text" class="form-control" style="background-color: gainsboro; border-radius: 0px;" id="adicional" name="adicional" placeholder="Ex: Cheddar" required>
            </div>

            <div class="col-md-6">
                <label for="valorAdicional" class="form-label" style="color: white; font-weight: bold;">VALOR DO ADICIONAL (R$)</label>

                <input type="number" class="form-control" style="background-color: gainsboro; border-radius: 0px;" id="valorAdicional" name="valorAdicional" step="0.01" min="0" placeholder="Valor do Adicional" required>
            </div>   
            
            <header class="text-center" id="adicionarHeader" style="background-color: black; margin-top: 30px; padding: 0px;">
                <h4 class="text-white text-center">
                    <div class="linha-com-texto">
                        <span>CADASTRAR BEBIDA</span>
                    </div>
                </h4>
            </header>

            <div class="col-12">
                <label for="bebida" class="form-label" style="color: white; font-weight: bold;">NOME DA BEBIDA</label>
                <select class="form-select" id="bebida" name="bebida" required style="background-color: gainsboro; border-radius: 0px;">
                    <option value="">Selecione uma bebida</option>
                    <option value="Coca-Cola">Coca-Cola</option>
                    <option value="Pepsi">Pepsi</option>
                    <option value="Guaran√° Antarctica">Guaran√° Antarctica</option>
                    <option value="Fanta Laranja">Fanta Laranja</option>
                    <option value="Fanta Uva">Fanta Uva</option>
                    <option value="Sprite">Sprite</option>
                    <option value="Del Valle">Del Valle</option>
                    <option value="√Ågua Mineral">√Ågua Mineral</option>
                </select>
            </div>

            <div class="col-md-6">
                <label for="tamanho" class="form-label" style="color: white; font-weight: bold;">TAMANHO DA BEBIDA</label>
                <select class="form-select" id="tamanho" name="tamanho" required style="background-color: gainsboro; border-radius: 0px;">
                    <option value="">Selecione o tamanho</option>
                    <option value="Lata">Lata</option>
                    <option value="600ml">600ml</option>
                    <option value="1L">1L</option>
                    <option value="1.5L">1.5L</option>
                    <option value="2L">2L</option>
                    <option value="Copo 300ml">Copo 300ml</option>
                    <option value="Garrafa 500ml">Garrafa 500ml</option>
                </select>
            </div>
            
            <div class="col-md-6">
                <label for="valorBebida" class="form-label" style="color: white; font-weight: bold;">VALOR DA BEBIDA (R$)</label>

                <input type="number" class="form-control" style="background-color: gainsboro; border-radius: 0px;" id="valorBebida" name="valorBebida" step="0.01" min="0" placeholder="Valor da Bebida" required>
            </div>  

            <header class="text-center" id="adicionarHeader" style="background-color: black; margin-top: 50px; padding: 0px;">
                <h3 class="text-white text-center">
                    <div class="linha-com-texto">
                        <input type="submit" class="btn" value="CADASTRAR" style="background-color: darkgrey; border-radius: 2px; border: black; width: 150px; color: black; font-weight: bold; margin-top: 10px;">
                    </div>
                </h3>
            </header>

        </form>
    </div>
</div>


<script>
    const form = document.getElementById('form');

    const idBebidaNova = document.querySelectorAll('.idBebidaNova')

    let ultimoInputBebida = idBebidaNova.length > 0 ? idBebidaNova[idBebidaNova.length - 1].value : null;

    let proximoValorBebida = parseInt(ultimoInputBebida) || 0;

    const idIngredi = document.querySelectorAll('.idLancheTeste')
    
    let ultimoInput = idIngredi.length > 0 ? idIngredi[idIngredi.length - 1].value : null;

    let proximoValor = parseInt(ultimoInput) || 0;

    const idBebidaInput = document.createElement('input');
    idBebidaInput.type = 'hidden';
    idBebidaInput.name = 'id_bebida';
    idBebidaInput.value = proximoValorBebida + 10;

    console.log(idBebidaInput)

    form.appendChild(idBebidaInput)

    const idLancheInput = document.createElement('input');
    idLancheInput.type = 'hidden';
    idLancheInput.name = 'id_referencia';
    idLancheInput.value = proximoValor + 10;

    console.log(idLancheInput)

    form.appendChild(idLancheInput)

//     document.getElementById('form').addEventListener('submit', function (event) {
//     event.preventDefault(); // Impede o envio padr√£o

//     const lanche = document.getElementById('lanche').value.trim();
//     const ingredientes = document.getElementById('ingredientes').value.trim();
//     const valor = document.getElementById('valor').value.trim();

//     if (!lanche || !ingredientes || !valor) {
//         Swal.fire({
//             title: '<span style="color: black;">Campos Obrigat√≥rios!</span>',
//             text: 'Preencha todos os campos para cadastrar o lanche.',
//             icon: 'warning',
//             confirmButtonText: 'Entendido',
//             confirmButtonColor: 'darkblue',
//         });
//     } else {
//         Swal.fire({
//             title: '<span style="color: black;">Cadastrar Lanche?</span>',
//             text: 'Cadastrar novo lanche.',
//             icon: 'question',
//             showCancelButton: true,
//             confirmButtonText: '‚úÖ Sim, cadastrar!',
//             cancelButtonText: 'üõë Cancelar',
//             confirmButtonColor: 'darkblue',
//             cancelButtonColor: 'darkred'
//         }).then((result) => {
//             if (result.isConfirmed) {
//                 // Envia o formul√°rio manualmente
//                 event.target.submit();
//             }
//         });
//     }
// });
    
    
</script>

{% endblock %}